{% extends 'base.html.twig' %}

{% block body %}
    {% set story = pagination[0].story %}

    <h1>#{{ story.id }} {{ story.title }}</h1>

    <ul class="list-inline">
        <li>
            <a href="{{ path('story_index') }}">List of stories</a>
        </li>
        <li>
            <a href="{{ path('story_edit', { 'id': story.id }) }}">Edit</a>
        </li>
        <li>
            {{ form_start(delete_form) }}
            <input class="btn-link " type="submit" value="Delete"
                   onclick="return confirm('Are you sure you want to delete this story?')">
            {{ form_end(delete_form) }}
        </li>
        <li>
            <a href="{{ path('snippet_new', { 'id': story.id }) }}">New snippet</a>
        </li>
    </ul>

    <p>Total Snippets: {{ pagination.getTotalItemCount }}</p>

    {% for row in pagination|batch(2) %}

        <div class="row">
        {% for snippet in row %}
            <div class="col-xs-6">
                <div>
                    <strong title="snippet position: {{ snippet.position }}">{{ snippet.title }}</strong>
                    <small>
                        <code>{{ snippet.language.title }}</code>
                        <ul class="list-inline">
                            <li>
                                <a href="{{ path('snippet_edit', { 'id': snippet.id }) }}">edit</a>
                            </li>
                            <li>
                                <a href="{{ path('snippet_show', { 'id': snippet.id }) }}">show</a>
                            </li>
                        </ul>
                    </small>
                </div>
                <div>{{ snippet.description }}</div>
                <hr class="spacer" />
                <pre><code class="language-{{ snippet.language.title}}">{{ snippet.code }}</code></pre>
                <hr class="spacer2" />
            </div>
        {% endfor %}
        </div>

    {% endfor %}

    <div class="navigation">
        {{ knp_pagination_render(pagination) }}
    </div>

{% endblock %}
